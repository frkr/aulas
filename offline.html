<!DOCTYPE html>
<html lang="en">
<head>
	<title>Testes</title>
</head>
<body onload="loaded()">

	<div id="status">
		<p id="state">ONLINE</p>
	</div>
	<div id="log"></div>
	<p>
		This is a test
	</p>


	<script>
		"use strict";
		function updateOnlineStatus(msg) {
			var status = document.getElementById('status');

			var condition = navigator.onLine ? "ONLINE" : "OFFLINE";
			status.setAttribute("class",condition);

			var state = document.getElementById('state');
			state.innerHTML=condition;

			var log = document.getElementById('log');
			log.innerHTML += "<br/>Event: " + msg + ";" + condition;
		}

		function loaded() {
			updateOnlineStatus("load");
			window.addEventListener("offline",function(){ updateOnlineStatus("offline"); }, false);
			window.addEventListener("online",function(){ updateOnlineStatus("online"); }, false);
		}
	</script>

</body>
</html>
